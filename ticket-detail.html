<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
      integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer" />
  </head>
  <body>
    <!-- <h2>Th√¥ng tin ƒë·∫∑t v√©</h2> -->
    <!-- <p>ƒêi·ªÉm ƒë·∫øn: <span class="location-info"></span></p>
    <p>Ng√†y: <span class="date-info"></span></p> -->
    <div class="wrapperDetaiTicket">
      <div class="ticket-detail">
        <div class="banner">
          <img
            src="./assets/vinwonders-nha-trang.jpg"
            alt="VinWonders Nha Trang" />
          <div class="back-btn">
            <a href="./ticket.html"><i class="fa-solid fa-arrow-left"></i></a>
          </div>
          <div class="cart-btn"><i class="fa-regular fa-heart"></i></div>
        </div>

        <div class="info">
          <h2>VinWonders Nha Trang</h2>
          <p class="rating"><span>‚≠ê 4.2</span> (7529 l∆∞·ª£t ƒë√°nh gi√°)</p>

          <div class="date-buttons">
            <button>H√¥m nay</button>
            <button>Ng√†y mai</button>
            <button class="active">
              <i class="fa-regular fa-calendar"></i> 27/10/2025
            </button>
          </div>

          <div class="filter-buttons">
            <button class="active">T·∫•t c·∫£ v√©</button>
            <button><i class="fa-solid fa-fire"></i> B√°n ch·∫°y nh·∫•t</button>
            <button>G√≥i VIP</button>
          </div>
        </div>

        <div class="ticket-card-list">
          <div class="ticket-card">
            <h3>
              [Nha Trang Passport] - [N·ª≠a ng√†y] - C√°p treo + X√¥ng h∆°i Aquafield
              (2 ti·∫øng) + Tata Show
            </h3>
            <ul>
              <li>B√© h√≥a th√¢n th√†nh nh√¢n vi√™n s·ªü th√∫ nh√≠</li>
              <li>Tr·∫£i nghi·ªám chƒÉm s√≥c, t∆∞∆°ng t√°c v·ªõi ƒë·ªông v·∫≠t</li>
              <li>L·ªõp h·ªçc di·ªÖn ra trong 01 ti·∫øng</li>
            </ul>
            <a href="#">Xem chi ti·∫øt ¬ª</a>

            <div class="price-box">
              <p>Ch·ªâ t·ª´ <span class="price">300,000 ƒë</span></p>
              <button class="btn-choose">Ch·ªçn</button>
            </div>
          </div>
          <div class="ticket-card">
            <h3>
              [Nha Trang Passport] - [N·ª≠a ng√†y] - C√°p treo + X√¥ng h∆°i Aquafield
              (2 ti·∫øng) + Tata Show
            </h3>
            <ul>
              <li>B√© h√≥a th√¢n th√†nh nh√¢n vi√™n s·ªü th√∫ nh√≠</li>
              <li>Tr·∫£i nghi·ªám chƒÉm s√≥c, t∆∞∆°ng t√°c v·ªõi ƒë·ªông v·∫≠t</li>
              <li>L·ªõp h·ªçc di·ªÖn ra trong 01 ti·∫øng</li>
            </ul>
            <a href="#">Xem chi ti·∫øt ¬ª</a>

            <div class="price-box">
              <p>Ch·ªâ t·ª´ <span class="price">300,000 ƒë</span></p>
              <button class="btn-choose">Ch·ªçn</button>
            </div>
          </div>
          <div class="ticket-card">
            <h3>
              [Nha Trang Passport] - [N·ª≠a ng√†y] - C√°p treo + X√¥ng h∆°i Aquafield
              (2 ti·∫øng) + Tata Show
            </h3>
            <ul>
              <li>B√© h√≥a th√¢n th√†nh nh√¢n vi√™n s·ªü th√∫ nh√≠</li>
              <li>Tr·∫£i nghi·ªám chƒÉm s√≥c, t∆∞∆°ng t√°c v·ªõi ƒë·ªông v·∫≠t</li>
              <li>L·ªõp h·ªçc di·ªÖn ra trong 01 ti·∫øng</li>
            </ul>
            <a href="#">Xem chi ti·∫øt ¬ª</a>

            <div class="price-box">
              <p>Ch·ªâ t·ª´ <span class="price">300,000 ƒë</span></p>
              <button class="btn-choose">Ch·ªçn</button>
            </div>
          </div>
        </div>
      </div>
      <!-- modal chi ti·∫øt v√© -->
      <div id="ticketModal" class="modal">
        <div class="modal-content">
          <span class="close-btn">&times;</span>
          <h3 class="modal-title">Chi ti·∫øt v√©</h3>
          <p class="modal-description">
            ƒê√¢y l√† m√¥ t·∫£ chi ti·∫øt c·ªßa g√≥i v√© b·∫°n ch·ªçn.
          </p>
        </div>
      </div>
      <!-- modal mua v√© -->
      <div id="buyModal" class="modalBuyTicket">
        <div class="modal-content ticket-buy">
          <span class="close-btn">&times;</span>
          <h3 class="modal-title">Ch·ªçn s·∫£n ph·∫©m</h3>
          <p>[Vinpearl Harbour] - V√© xem Tata Show</p>

          <div class="quantity-section">
            <h4><i class="fa-solid fa-user-group"></i> S·ªë l∆∞·ª£ng mua</h4>

            <div class="ticket-type">
              <div>
                <p>Ng∆∞·ªùi l·ªõn</p>
                <small>Cao t·ª´ 140cm</small>
              </div>
              <div class="price">100,000 ƒë</div>
              <div class="counter">
                <button class="minus">‚àí</button>
                <span class="count">1</span>
                <button class="plus">+</button>
              </div>
            </div>

            <div class="ticket-type">
              <div>
                <p>Tr·∫ª em</p>
                <small
                  >Cao t·ª´ <br />
                  100cm‚Äì139cm</small
                >
              </div>
              <div class="price">100,000 ƒë</div>
              <div class="counter">
                <button class="minus">‚àí</button>
                <span class="count">0</span>
                <button class="plus">+</button>
              </div>
            </div>

            <div class="ticket-type">
              <div>
                <p>Ng∆∞·ªùi cao tu·ªïi</p>
                <small>T·ª´ 60 tu·ªïi</small>
              </div>
              <div class="price">100,000 ƒë</div>
              <div class="counter">
                <button class="minus">‚àí</button>
                <span class="count">0</span>
                <button class="plus">+</button>
              </div>
            </div>
          </div>

          <div class="footer">
            <span class="total">100,000 ƒë</span>
            <button class="buy-btn">Mua ngay</button>
          </div>
        </div>
      </div>

      <!-- modal x√°c nh·∫≠n ng∆∞·ªùi ƒë·∫∑t -->
      <div id="confirmModal" class="modal confirm-modal">
        <div class="modal-content confirm-content">
          <span class="close-btn">&times;</span>
          <h3>X√°c nh·∫≠n th√¥ng tin ƒë·∫∑t v√©</h3>
          <div class="confirm-info">
            <p>
              <strong>T√™n kh√°ch h√†ng:</strong>
              <span id="customerName">L√™ Quang L·ªôc</span>
            </p>
            <p><strong>Ng√†y ƒë·∫∑t:</strong> <span id="bookingDate"></span></p>
            <p><strong>T·ªïng ti·ªÅn:</strong> <span id="confirmTotal"></span></p>
          </div>
          <button class="pay-btn">Thanh to√°n</button>
        </div>
      </div>

      <!-- Th√¥ng b√°o mua th√†nh c√¥ng -->
      <div id="successToast" class="toast">üéâ B·∫°n ƒë√£ mua th√†nh c√¥ng!</div>

      <!-- Modal qu√©t m√£ QR -->
      <div id="qrModal" class="modal qr-modal">
        <div class="modal-content qr-content">
          <span class="close-btn">&times;</span>
          <h3>Qu√©t m√£ QR ƒë·ªÉ thanh to√°n</h3>
          <p>Vui l√≤ng m·ªü ·ª©ng d·ª•ng ng√¢n h√†ng ho·∫∑c v√≠ ƒëi·ªán t·ª≠ ƒë·ªÉ qu√©t m√£.</p>
          <img src="./assets/qr.jpg" alt="QR Code" class="qr-image" />
          <div class="ticket-details">
            <div class="ticket-info">
              <h4>T√™n kh√°ch h√†ng:</h4>
              <h4>S·ªë ƒëi·ªán tho·∫°i:</h4>
              <h4>S·ªë ti·ªÅn:</h4>
              <h4>M√£ v√©:</h4>
            </div>
            <div class="ticket-note">
              <h4>L√™ Quang L·ªôc</h4>
              <h4>0909123456</h4>
              <h4>300,000 ƒë</h4>
              <h4>VIN-261025-1000-COMBO-2NL-1TE-PRIORITY</h4>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      const params = new URLSearchParams(window.location.search);
      const selectedLocation = params.get("location");
      const selectedDate = params.get("date");

      // --- C·∫≠p nh·∫≠t v√†o giao di·ªán ---
      // G·∫Øn t√™n ƒëi·ªÉm ƒë·∫øn v√†o th·∫ª h2
      const titleElement = document.querySelector(".info h2");
      if (selectedLocation) {
        titleElement.textContent = selectedLocation;
      } else {
        titleElement.textContent = "Kh√¥ng c√≥ d·ªØ li·ªáu";
      }

      // G·∫Øn ng√†y v√†o n√∫t l·ªãch
      const dateButton = document.querySelector(".date-buttons button.active");
      if (selectedDate) {
        dateButton.innerHTML = `<i class="fa-regular fa-calendar"></i> ${selectedDate}`;
      } else {
        dateButton.innerHTML = `<i class="fa-regular fa-calendar"></i> Kh√¥ng c√≥ d·ªØ li·ªáu`;
      }

      const modal = document.getElementById("ticketModal");
      const modalTitle = document.querySelector(".modal-title");
      const modalDescription = document.querySelector(".modal-description");
      const closeBtn = document.querySelector(".close-btn");

      // L·∫Øng nghe click v√†o c√°c n√∫t "Xem chi ti·∫øt"
      document.querySelectorAll(".ticket-card a").forEach((link) => {
        link.addEventListener("click", (e) => {
          e.preventDefault();

          // Tu·ª≥ ch·ªânh n·ªôi dung modal theo th·∫ª v√© ƒë∆∞·ª£c b·∫•m
          const card = e.target.closest(".ticket-card");
          const title =
            card.querySelector("h3")?.textContent.trim() || "Chi ti·∫øt v√©";
          // const details =
          //   card.querySelector("ul")?.innerHTML ||
          //   "<p>Kh√¥ng c√≥ th√¥ng tin chi ti·∫øt</p>";

          const details = `
      <h4>BAO G·ªíM</h4>
      <ul>
        <li>V√© xem v·ªü di·ªÖn th·ª±c c·∫£nh ƒëa ph∆∞∆°ng ti·ªán ƒë·∫≥ng c·∫•p qu·ªëc t·∫ø Tata Show | 19:30 - 20:10 h√†ng ng√†y</li>
        <li>C√°c quy·ªÅn l·ª£i kh√°c: Th∆∞·ªüng th·ª©c m√†n bi·ªÉu di·ªÖn Nh·∫°c n∆∞·ªõc l√∫c 19:00 - 19:15; 
            Ch∆∞∆°ng tr√¨nh b·∫Øn ph√°o hoa s·∫Ω di·ªÖn ra h√†ng tu·∫ßn v√†o c√°c ng√†y Th·ª© 7 (Ph√°o hoa t·∫ßm cao t·∫°i Qu·∫£ng Tr∆∞·ªùng L·ªÖ H·ªôi) 
            v√† Th·ª© 6 (Ph√°o hoa t·∫ßm trung t·∫°i Qu·∫£ng Tr∆∞·ªùng Th·∫ßn Tho·∫°i) sau Tata Show.</li>
      </ul>
      <h4>ƒêI·ªÄU KHO·∫¢N</h4>
      <ul>
        <li>V√© kh√¥ng bao g·ªìm v√© tr·∫£i nghi·ªám c√°p treo. Qu√Ω kh√°ch vui l√≤ng mua th√™m.</li>
        <li>V√© v√†o c·ª≠a VinWonders Nha Trang t·ª´ 18:30.</li>
      </ul>
    `;

          modalTitle.textContent = title;
          modalDescription.innerHTML = details;

          modal.style.display = "flex";
        });
      });

      // ƒê√≥ng modal khi b·∫•m n√∫t X
      closeBtn.addEventListener("click", () => (modal.style.display = "none"));

      // ƒê√≥ng khi click ra ngo√†i
      window.addEventListener("click", (e) => {
        if (e.target === modal) modal.style.display = "none";
      });

      const buyModal = document.getElementById("buyModal");
      const buyCloseBtn = buyModal.querySelector(".close-btn");
      const totalElement = buyModal.querySelector(".total");

      document.querySelectorAll(".btn-choose").forEach((btn) => {
        btn.addEventListener("click", () => {
          buyModal.style.display = "flex";
        });
      });

      buyCloseBtn.addEventListener("click", () => {
        buyModal.style.display = "none";
      });

      window.addEventListener("click", (e) => {
        if (e.target === buyModal) buyModal.style.display = "none";
      });

      // --- C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng v√† t·ªïng ti·ªÅn ---
      buyModal.querySelectorAll(".ticket-type").forEach((type) => {
        const plus = type.querySelector(".plus");
        const minus = type.querySelector(".minus");
        const countEl = type.querySelector(".count");
        const price = 100000;

        plus.addEventListener("click", () => {
          countEl.textContent = parseInt(countEl.textContent) + 1;
          updateTotal();
        });

        minus.addEventListener("click", () => {
          const current = parseInt(countEl.textContent);
          if (current > 0) countEl.textContent = current - 1;
          updateTotal();
        });
      });

      function updateTotal() {
        let total = 0;
        buyModal.querySelectorAll(".ticket-type").forEach((type) => {
          const count = parseInt(type.querySelector(".count").textContent);
          total += count * 100000;
        });
        totalElement.textContent = total.toLocaleString("vi-VN") + " ƒë";
      }

      // const buyBtn = buyModal.querySelector(".buy-btn");
      // const qrModal = document.getElementById("qrModal");
      

      // buyBtn.addEventListener("click", () => {
      //   // ·∫®n modal mua v√©
      //   buyModal.style.display = "none";

      //   // Hi·ªÉn th·ªã modal QR
      //   qrModal.style.display = "flex";
      // });

      

      // window.addEventListener("click", (e) => {
      //   if (e.target === qrModal) {
      //     qrModal.style.display = "none";
      //     toast.classList.add("show");
      //     setTimeout(() => toast.classList.remove("show"), 2500);
      //   }
      // });
      const buyBtn = buyModal.querySelector(".buy-btn");
      const confirmModal = document.getElementById("confirmModal");
      const confirmCloseBtn = confirmModal.querySelector(".close-btn");
      const confirmTotal = document.getElementById("confirmTotal");
      const bookingDateEl = document.getElementById("bookingDate");
      const payBtn = confirmModal.querySelector(".pay-btn");
      const qrCloseBtn = qrModal.querySelector(".close-btn");
      const toast = document.getElementById("successToast");


      buyBtn.addEventListener("click", () => {
        // ·∫®n modal mua v√©
        buyModal.style.display = "none";

        // Hi·ªán modal x√°c nh·∫≠n
        const totalText = totalElement.textContent;
        confirmTotal.textContent = totalText;

        const today = new Date();
        const formattedDate = today.toLocaleDateString("vi-VN");
        bookingDateEl.textContent = formattedDate;

        confirmModal.style.display = "flex";
      });

      // ƒê√≥ng modal x√°c nh·∫≠n
      confirmCloseBtn.addEventListener("click", () => {
        confirmModal.style.display = "none";
      });

      window.addEventListener("click", (e) => {
        if (e.target === confirmModal) confirmModal.style.display = "none";
      });

      // Khi nh·∫•n "Thanh to√°n"
      payBtn.addEventListener("click", () => {
        confirmModal.style.display = "none";
        qrModal.style.display = "flex";
      });
      // ƒê√≥ng modal QR khi nh·∫•n n√∫t X ho·∫∑c click ra ngo√†i
      qrCloseBtn.addEventListener("click", () => {
        qrModal.style.display = "none";

        // Hi·ªán th√¥ng b√°o mua th√†nh c√¥ng sau khi ƒë√≥ng QR
        toast.classList.add("show");
        setTimeout(() => toast.classList.remove("show"), 2500);
      });
    </script>
  </body>
</html>
